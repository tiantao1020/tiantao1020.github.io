(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ceshi-ceshi"],{"8c3a":function(e,n,t){"use strict";t.r(n);var i=t("a599"),o=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=o.a},a4c1:function(e,n,t){"use strict";var i;t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.isWeixin?t("v-uni-view",{staticClass:"bottom-side-otherLogin",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.getWeChatCode.apply(void 0,arguments)}}},[t("v-uni-text",[e._v("其他社交账号登录")]),t("v-uni-image",{attrs:{src:"https://xuezhifu-resource.oss-cn-hangzhou.aliyuncs.com/newxuefu/mwx/wx.png"}})],1):e._e()},a=[]},a599:function(e,n,t){"use strict";(function(e){t("4d63"),t("ac1f"),t("25f0"),t("466d"),t("5319"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={data:function(){return{isWeixin:!1}},onLoad:function(){this.isWeixin=this.isWechat(),this.isWeixin&&this.checkWeChatCode()},onShow:function(){},mounted:function(){},methods:{isWechat:function(){return"micromessenger"===String(navigator.userAgent.toLowerCase().match(/MicroMessenger/i))},getUrlCode:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},checkWeChatCode:function(){var e=this.getUrlCode("code");uni.showToast({title:"微信code=".concat(e)}),e&&this.getOpenidAndUserinfo(e)},getWeChatCode:function(){var e=encodeURIComponent(window.location.href),n="wx3da02a1f702ee1d5";window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+n+"&redirect_uri="+e+"&response_type=code&scope=snsapi_userinfo&state=1#wechat_redirect"},getOpenidAndUserinfo:function(n){var t=this;this.$http({url:"api/login",data:{code:n}}).then((function(n){e("log",n," at pages/ceshi/ceshi.vue:69"),0==n.code?t.afterLogin(n):uni.showToast({title:n.msg,duration:3e3,icon:"none"})}))},afterLogin:function(e){var n=e.data.user;uni.setStorageSync("token",e.data.token);var t={avatar:n.avatar?n.avatar:this.avatar,mobile:n.mobile,nickname:n.nickname?n.nickname:"土肥圆"};uni.setStorage({key:"u",data:t,success:function(){var e=uni.getStorageSync("redirect");uni.reLaunch({url:e||"/pages/index"})}})}}};n.default=i}).call(this,t("0de9")["log"])},d728:function(e,n,t){"use strict";t.r(n);var i=t("a4c1"),o=t("8c3a");for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a);var c,r=t("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],c);n["default"]=u.exports}}]);